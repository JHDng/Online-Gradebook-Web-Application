title Event: GoToHomeStudent

participant Request
participant GoToHomeStudent
participant Session
participant CourseDAO
participant ExamDateDAO
participant ctx
participant homeStudent.html
participant Response

Request->GoToHomeStudent: doGet(courseID)

GoToHomeStudent->Session: getAttribute("user")
GoToHomeStudent->CourseDAO: findCoursesByStudentID(studentID)
CourseDAO->GoToHomeStudent: courses || null

alt courses == null || courses.isEmpty()
    GoToHomeStudent->ctx: setVariable("hiddenTextCourse", "hiddenTextDate","hiddenTextName","Identifier")
    GoToHomeStudent->homeStudent.html: templateEngine.process(path, ctx, response.getWriter())
else
    alt !SafeChecker.isStringSafe(courseID_str)
       GoToHomeStudent->Response: sendError("Invalid exam date id")
    else
        GoToHomeStudent->GoToHomeStudent: courseID = courses.getFirst().getCourseID()
    end

    GoToHomeStudent->Session: getAttribute("user")
    GoToHomeStudent->ExamDateDAO: findRegisteredDatesByStudentID(studentID, courseID)
    ExamDateDAO->GoToHomeStudent: dates || null

    alt dates == null || dates.isEmpty()
        GoToHomeStudent->ctx: setVariable("hiddenTextDate","hiddenTextName", "Identifier")
    else
       
        GoToHomeStudent->ctx: setVariable("dates","hiddenTextDate", "hiddenTextName","Identifier")
    end

    GoToHomeStudent->ctx: setVariable("courses","hiddenTextCourse")
    GoToHomeStudent->homeStudent.html: templateEngine.process(path, ctx, response.getWriter())
end
